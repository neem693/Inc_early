<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
    namespace="com.anylogic.iot.api.admin.onm.mapper.MenuMapper">


    <!--  메뉴 - selectMenu -->
    <select id="selectMenu" parameterType="Map" resultType="Map">

        SELECT
            menu_id
            , lmenu_id
            , mmenu_id
            , smenu_id
            , menu_name
            , mapping_prog
            , mapping_para
            , rank
            , comment
            , menu_level
            , create_id
            , to_char(create_dt,'YYYY-MM-DD hh24:mi:ss') as create_dt
            , update_id
            , to_char(update_dt,'YYYY-MM-DD hh24:mi:ss') as update_dt
            , del_yn
            , ROW_NUMBER() OVER( order by menu_id ) as RNUM 
        FROM sdp.tb_menu
        WHERE 1 = 1
            and del_yn = 'N' 
        <if test="searchType != null and (searchType eq 'A'.toString()) and searchText != null and searchText"> 
        and menu_id = #{menu_id}
        </if>

    </select>


    <!--  메뉴 - selectMenuAll -->
    <select id="selectMenuAll" parameterType="Map" resultType="Map">

        SELECT
            menu_id
            , lmenu_id
            , mmenu_id
            , smenu_id
            , menu_name
            , mapping_prog
            , mapping_para
            , rank
            , comment
            , menu_level
            , create_id
            , to_char(create_dt,'YYYY-MM-DD hh24:mi:ss') as create_dt
            , update_id
            , to_char(update_dt,'YYYY-MM-DD hh24:mi:ss') as update_dt
            , del_yn
            , ROW_NUMBER() OVER( order by menu_id ) as RNUM 
        FROM sdp.tb_menu
        WHERE 1 = 1
            and del_yn = 'N' 
        <if test="searchType != null and (searchType eq 'A'.toString()) and searchText != null and searchText"> 
        and menu_id = #{menu_id}
        </if>

    </select>


    <!--  메뉴 - selectMyMenu -->
    <select id="selectMyMenu" parameterType="Map" resultType="Map">

        SELECT
            menu_id
            , lmenu_id
            , mmenu_id
            , smenu_id
            , menu_name
            , mapping_prog
            , mapping_para
            , rank
            , comment
            , menu_level
            , create_id
            , to_char(create_dt,'YYYY-MM-DD hh24:mi:ss') as create_dt
            , update_id
            , to_char(update_dt,'YYYY-MM-DD hh24:mi:ss') as update_dt
            , del_yn
            , ROW_NUMBER() OVER( order by menu_id ) as RNUM 
        FROM sdp.tb_menu
        WHERE 1 = 1
            and del_yn = 'N' 
        <if test="searchType != null and (searchType eq 'A'.toString()) and searchText != null and searchText"> 
        and menu_id = #{menu_id}
        </if>

    </select>

</mapper>
